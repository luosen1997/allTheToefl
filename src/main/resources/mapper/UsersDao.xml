<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project812.tuofu.dao.UsersDao">
    <!-- 实体类属性与数据库的列的对应关系 -->
    <resultMap type="com.project812.tuofu.pojo.Users" id="usersMap">
        <!--column代表数据库中的列名  property代表实体类的属性   javaType代表在java中的数据类型  jdbcType代表在数据库中的数据类型 -->
        <id column="user_id" property="userId"/>
        <result column="login_name" property="loginName"/>
        <result column="password" property="password"/>
        <result column="sex" property="sex"/>
        <result column="email" property="email"/>
        <result column="phone_num" property="phoneNum"/>
        <result column="birthday" property="birthday"/>
        <result column="personalize_signature" property="personalizeSignature"/>
        <result column="img_url" property="imgUrl"/>
        <result column="user_level" property="userLevel"/>
        <result column="currency_num" property="currencyNum"/>
        <result column="status" property="status"/>
        <result column="register_time" property="registerTime"/>
        <result column="last_modify" property="lastModify"/>
        <result column="level_name" property="levelName"/>

        <result column="level_id" property="levelId"/>
    </resultMap>

    <select id="getUsers" resultMap="usersMap">
        SELECT * FROM sys_user AS sysuser LEFT JOIN dic_user_level AS  dicuser ON sysuser.user_level=dicuser.level_id
        <where>
            <if test="loginName !=null and loginName !=''">
                and login_name like '%${loginName}%'
            </if>
            <if test="status !=null and status !=''">
                and status like '%${status}%'
            </if>
            <if test="userLevel !=null and userLevel !=''">
                and user_level like '%${userLevel}%'
            </if>
        </where>

    </select>

    <delete id="deleteUsers" parameterType="String">
        delete from sys_user where  user_id in(${ids})
    </delete>

    <update id="freezeUsers" parameterType="String">
         update sys_user set status=1 where  user_id in(${ids})
    </update>

    <update id="thawUsers" parameterType="String">
         update sys_user set status=2 where  user_id in(${ids})
    </update>
</mapper>